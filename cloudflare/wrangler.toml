# Cloudflare Worker Configuration for OrbitalCloud
# Configuração moderna (2025) - Workers com Assets integrados
# https://developers.cloudflare.com/workers/

name = "orbitalcloud"
main = "worker/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]

# Assets estáticos - frontend React servido pelo Worker
[assets]
directory = "../dist/public"
not_found_handling = "single-page-application"

# Variáveis de ambiente (não sensíveis)
[vars]
ENVIRONMENT = "production"

# Account configuration (preencher após criar conta Cloudflare)
# account_id = "your-account-id"

# KV Namespaces para sessões (opcional)
# [[kv_namespaces]]
# binding = "SESSIONS"
# id = "your-kv-namespace-id"

# D1 Database (opcional - se quiser usar SQLite da Cloudflare)
# [[d1_databases]]
# binding = "DB"
# database_name = "angocloud"
# database_id = "your-d1-database-id"

# R2 Storage (opcional - para arquivos maiores)
# [[r2_buckets]]
# binding = "FILES"
# bucket_name = "angocloud-files"

# Secrets a configurar via wrangler secret put:
# - DATABASE_URL: Connection string PostgreSQL (Neon)
# - JWT_SECRET: Chave secreta para tokens JWT
# - TELEGRAM_BOT_1_TOKEN: Token do primeiro bot Telegram
# - TELEGRAM_BOT_2_TOKEN: Token do segundo bot (opcional)
# - TELEGRAM_BOT_3_TOKEN: Token do terceiro bot (opcional)
# - TELEGRAM_BOT_4_TOKEN: Token do quarto bot (opcional)
# - TELEGRAM_BOT_5_TOKEN: Token do quinto bot (opcional)
# - TELEGRAM_STORAGE_CHAT_ID: ID do chat para armazenamento

[build]
command = "npm run build"

[dev]
port = 8787
local_protocol = "http"

# Rotas de produção (configurar após setup do domínio)
# [[routes]]
# pattern = "orbital.cloud/*"
# zone_name = "orbital.cloud"

# Custom domain
# [[routes]]
# pattern = "www.orbital.cloud/*"
# zone_name = "orbital.cloud"
